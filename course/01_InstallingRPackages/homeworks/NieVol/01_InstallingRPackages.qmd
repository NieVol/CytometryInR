---
title: "Week 1: Installing R Packages"
author: "Nienke Vollebregt"
date: 12-02-2026
format: html
---

There are different repositories which store R packages. For biology purposes, the most used is Bioconductor.  

```{r}
#If you want to have the information for the function you are using, put a ? in front of the function. In positron you can also hover over the function name where it shows you the help file. 
#?sessionInfo()
sessionInfo()
```

Start by installing packages from CRAN, the biggest R package repository. These include the tidyverse packages. 
CRAN has specific installation commands. 

# Installing packages from CRAN
```{r}
#install.packages is the function to get packages from CRAN. To install, you need to put the quotation marks around the name of the package you want to install. 
# install.packages("dplyr")
# If a package has been installed succesfully, you need to load it into the local environment using the library() function. Here you do not need the quotation marks around the name of the package. This attaches it to the environment.
library(dplyr)
?dplyr
# You can also detach or remove a package again. remove.packages()
```

When you use the code needed to download a package from CRAN for a package that is available on Bioconductor, you will get a specific output. 
For installing from Bioconductor you need this code.

# Installing packages from Bioconductor 

```{r}
#install.packages("BiocManager") #you first need to install a package from CRAN that will allow us to install Bioconductor packages. 
library(BiocManager) # load into local environment
#install("PeacoQC") # install() is the function needed to install packages from Bioconductor.
library(PeacoQC) # you still need to load into local environment
```

# Installing from GitHub

R packages from GitHub are located in a persons account. Always double check the last date of updating the package, it can be that the package from GitHub has been abandoned. 

```{r}
#install.packages("remotes") # you first need to install the remotes package from CRAN
library(remotes) # attach to local environment
# We will install the flowSpectrum package today, made by GitHub user hally166. you need the name of the user and the name of the package repository. Input into install_github() function from remotes package. 
#install_github("hally166/flowSpectrum")
```

# Troubleshooting install errors

First spot the ERROR sign in the console and read what is behind it. 
R also gives you suggestions for how to fix the error. 

# Installing specific package versions

When installing packages, there will always be a version number behind it. This allows you to go back in time to when a package was working in a certain way if you want to. 
The way to do this changes from the location of the package. However, you always use the remotes() function. 

```{r}
packageVersion("PeacoQC") # function to check which version of a package you currently are using
citation("PeacoQC") # gives you the information needed to cite the package in a publication. also includes the version.
```

# Your Turn: installing specific packages

```{r}
#| eval: FALSE
install.packages("purrr")
install("flowCore")
install("flowWorkspace")
install.packages("stringr")
install.packages("ggplot2")
install("ggcyto")
install.packages("tidyr")
install("openCyto")
install("FlowSOM")
install.packages("xml2")
install_github("saeyslab/CytoNorm")
install.packages(("lubridate"))
install.packages("httr2")
install("flowGate")
install.packages("devtools")
install.packages("plotly")
install_github("biosurf/cyCombine")
install("CytoML")
install.packages("Rtsne")
install.packages("uwot")
```

# Take-home Problems

## Problem 1
**We installed PeacoQC during this session, but we didn’t have time to explore what functions are present within the package. Using what you have learned about accessing documentation, figure out and list what functions it contains.**

```{r}
?PeacoQC() 
# website https://www.bioconductor.org/packages/release/bioc/html/PeacoQC.html
```

From accesing the R documentation with the above code, you can see that PeacoQC functions as peak-based detection of high quality cytometry data. It "will determine peaks on the channels in the flowframe. Then it will remove anomalies caused by e.g. clogs, changes in speed etc. by using an IsolationTree and/or the MAD method."

It contains

## Problem 2
**Take a closer look at the list of Bioconductor cytometry packages. Report back on how many there are currently in Bioconductor, the author/maintainer with the most contributed cytometry R packages, and a couple packages that you would be interested in exploring more in-depth later in the course.**

When looking at the [website](https://www.bioconductor.org/packages/release/BiocViews.html#___FlowCytometry) you can see there are 69 entries for FlowCytometry packages. 

The author/maintainer with the most contributed cytometry R packages is Mike Jiang.

Packages I want to explore more in-depth later in the course are flowGraph, flowCHIC, flowTRANS, flowStats, flowCyBar, flowCut, GateFinder, and CytoPipeline.

## Problem 3
**There is another way to install R packages, using the newer pak package. Positron uses this when installing suggested dependencies.**

**After learning more about it via the documentation and it’s pkgdown website, I would like you to attempt to install the following three R packages using this newer method: “broom”, “cytoMEM”, “DillonHammill/CytoExploreR”.**

**Take screenshots, and in a new quarto markdown document, describe how the installation process differed from what you saw for install.packages(), install() and install_github().**

First we have to install the pak package.

```{r}
install.packages("pak")
library(pak)
```

The site lists how to install from CRAN or Bioconductor using pak::pkg_install("name") and for GitHub packages as pak::pkg_install("username/packagename").


```{r}
# broom is a CRAN package so should be installed with. 
pkg_install("broom")
# cytoMEM is a bioconductor package, and can be installed with the same code as for CRAN.
pkg_install("cytoMEM")
# for the GitHub package you can also use the pkg_install() function.
pkg_install("DillonHammill/CytoExploreR") # it showed an error when trying for the first time that it cannot install dependencies
```

It took a while to show that it started the installation, unlike when using the other installation methods. However, the output is very clean and a lot clearer than for the other installation methods. Once it gets downloading, it is very fast. 